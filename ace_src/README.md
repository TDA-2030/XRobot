
## 通信协议

为了绕开 OMRON 的编程软件限制设计了一套通过 TCP 控制机器人的通信协议，通信分为两个部分的软件代码：

- 第一部分：在 ACE 软件中建立 TCP Server，实现将发送自 Client 的指令在机器人上进行执行

- 第二部分：基于 Python 实现了对应的 Client，对协议支持的指令进行了封装

TCP 通信端口固定为 `43000`

### 协议格式

通信使用字符串的形式传输，一次完整的通信包括一条client端发送的命令和Server回复的结果，所有的消息都被 `<` `>` 两字符包裹。

#### 回复

回复包含由`|`分隔的两部分，前面是状态，后面是回复的具体消息，回复格式如下：

```
<status|message>
```

**注意：** message 部分不是必须的

状态消息如下：

| status | 说明 |
| ------ | ---- |
| ok     | 成功 |
| error  | 失败 |



#### 发送命令

发送命令格式如下：

```
<command:parameter1,parameter2,parameter3>
```

**注意：** 命令和参数中不能出现这些字符 `<>,:`

| command | parameter                   | 说明                                                         | 示例                      |
| ------- | --------------------------- | ------------------------------------------------------------ | ------------------------- |
| MI      | x, y, z, r, f, a, d, s, l,w | 增量坐标运动指令，设置的速度等参数将会被保存，以后一直使用这个速度<br>x：x方向的值<br/>y：y方向的值<br/>z：z方向的值<br/>r：r方向的值<br/>f：运动速度，100表示额定<br/>a：加速中的加速器，100表示额定<br/>d：减速中的加速器，100表示额定<br/>s：S曲线级别 [0, 8]<br/>l：是否走直线<br/>w：是否等待运动结束才返回<br/> | MI:x1.00,y2.00,z3.00,f100 |
| MA      | x, y, z, r, f, a, d, s, l,w | 绝对坐标运动指令，设置的速度等参数将会被保存，以后一直使用这个速度<br>参数同`MI`命令 | MA:x1.00,y2.00,z3.00,f100 |
| R       | p, i,e                      | p：读取位姿，i ：读取机器人信息，e：读取编码器信息           | R:p // 读取机器人位姿     |
| POWER   | 0 / 1                       | 控制机器人高压电源的开关                                     | POWER:1 //开启电源        |
